<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>

        //好恶心，但是不难，记得有setTimeout叠加机制 会有时间的叠加
        console.log("1");

        setTimeout(() => { // s1
            console.log("2");
            Promise.resolve()
                .then(() => {
                    console.log("3");
                    return new Promise((resolve) => {
                        console.log("4");
                        setTimeout(() => { //s5
                            console.log("5");
                            resolve("6");
                        }, 40);
                    });
                })
                .then((res) => {
                    console.log(res);
                    setTimeout(() => {
                        console.log("7");
                    }, 0);
                });
        }, 0);



        Promise.reject("8")
            .catch((err) => {
                console.log(err);
                return "9";
            })
            .then(async (res) => {
                console.log(res);


                await Promise.resolve()
                    .then(() => {
                        console.log("10");
                        return new Promise((resolve) => {
                            setTimeout(() => { //s4
                                console.log("11");
                                resolve("12");
                            }, 30);
                        });
                    })
                    .then((res) => {
                        console.log(res);
                    });
                console.log("13");
            })
            .finally(() => {
                console.log("14");
            });



        (async () => { //就是一个异步函数
            console.log("15");
            await new Promise((resolve) => {
                console.log("16");
                setTimeout(() => { // s2
                    console.log("17");
                    resolve();
                }, 20);
            });
            console.log("18");
        })();




        setTimeout(() => { //s3
            console.log("19");
            Promise.resolve()
                .then(() => {
                    console.log("20");
                    return Promise.reject("21");
                })
                .catch((err) => {
                    console.log(err);
                    return "22";
                })
                .then((res) => {
                    console.log(res);
                    return new Promise((resolve) => {
                        console.log("23");
                        setTimeout(() => { //s6
                            console.log("24");
                            resolve("25");
                        }, 10);
                    });
                })
                .then((res) => {
                    console.log(res);
                });
        }, 10);




        console.log("26");
    </script>
</body>

</html>