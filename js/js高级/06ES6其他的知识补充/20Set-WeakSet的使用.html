<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        //Weak Reference弱引用 ，Strong Reference强引用

        //默认强引用
        let obj1 = {name : "huu"}
        let obj2 = {name : "aaa"}
        let obj3 = {name : "bbb"}

        let arr = [obj1,obj2,obj3]

        //这三个对象是null 。 但是我的数组还在引用，不会被销毁，类似于闭包
        // obj1 = null
        // obj2 = null
        // obj3 = null
        
        // console.log(arr)

        //set还在引用
        //和set的区别
        //1.只能存放对象类型
        const weakset = new WeakSet()
        weakset.add(obj1)
        weakset.add(obj2)
        
        //2。对对象的引用都是弱引用
 
        //3.add delete has
        //不能进行遍历，弱引用可能原来的对象已经被销毁

        //WeakSet的应用 在想对一个对象销毁使用更好
        const pWeakSet = new WeakSet()
        class Person{
            constructor(){
                pWeakSet.add(this)//new方式创建的对象加到这个里面去
            }
            running(){
                //不是通过new创建的对象，但是在调用函数就会error
                if(!pWeakSet.has(this)){
                    console.log("error")
                    return 
                }
                console.log("running")
            }
        }
        const p = new Person()
        const run = p.running//直接获取函数
        run()
        p.running()
    </script> 
</body>
</html>